<html>
	<head>
		<title>3DExperimentJS</title>
		<meta charset="utf-8" />
		<link href='http://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>
		<script src="js/libs/sylvester.js" type="text/javascript"></script>
	    <script src="js/libs/glUtils.js" type="text/javascript"></script>
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>

		<style type="text/css">
			#container{
				margin: 0px auto;
				width: 480px;
			}
			footer p{
				text-align: center;
				font-family: "Open Sans";
				font-size: 12px;
			}
		</style>
		<script id="shader-vs" type="x-shader/x-vertex">
			attribute vec3 position;
			attribute vec2 textureCoord;
			attribute vec3 normal;

			uniform mat4 view;
			uniform mat4 model;
			uniform mat4 normalM;

			varying vec2 texture;
			varying vec3 vLighting;
			
			void main(void){
				gl_Position = view * model * vec4(position, 1.0);
				texture = textureCoord;

				//Lighting effect
				highp vec3 ambient = vec3(0.4, 0.4 ,0.4);
				highp vec3 directionalLight = vec3(0.55, 0.5, 0.5);
				highp vec3 directionalVector = vec3(0.85, 0.8, 0.75);

				highp vec4 transformedNormal = normalM * vec4(normal, 1.0);
				highp float directional = max(dot(transformedNormal.xyz, directionalVector), 0.0);
				vLighting = ambient + (directionalLight * directional);
			}
		</script>
		<script id="shader-fs" type="x-shader/x-fragment">
			precision mediump float;
			varying vec2 texture;
			varying vec3 vLighting;

			uniform sampler2D uSampler;

			void main(void){
				mediump vec4 texelColor = texture2D(uSampler, vec2(texture.s, texture.t));
				gl_FragColor = vec4(texelColor.rgb * vLighting, texelColor.a);
				//gl_FragColor = vec4(vec3(0.8,0.8,0.8) * vLighting, 1.0);
			}
		</script>
	</head>
	
	<body onload="initApplication()">
		<div id="container">
			<canvas id="mainCanvas">
				Your browser doesn't support the canvas element :(
			</canvas>
			<footer>
				<form>
					<section id="scaleControl">
						<p>Scale x: </p>
						<input id="scaleX" type="range" min="1" max="20" value="10" step="1" onchange="updateScale()" />
						<p>Scale y: </p>
						<input id="scaleY" type="range" min="1" max="20" value="10" step="1" onchange="updateScale()" />
						<p>Scale z: </p>
						<input id="scaleZ" type="range" min="1" max="20" value="10" step="1" onchange="updateScale()" />
					</section>
					<section id="translationControl">
						<p>Translate x: </p>
						<input type="range" min="0" max="50" value="0" step="5" onchange="updateTranslation(this.value)" />
						<p>Translate y: </p>
						<input type="range" min="0" max="50" value="0" step="5" onchange="updateTranslation(this.value)" />
						<p>Translate z: </p>
						<input type="range" min="0" max="50" value="0" step="5" onchange="updateTranslation(this.value)" />
					</section>
					<section id="rotationControl">
						<p>Rotation x: </p>
						<input id="rotationX" type="range" min="0" max="10" value="5" step="1" onchange="updateRotation()" />
						<p>Rotation y: </p>
						<input id="rotationY" type="range" min="0" max="10" value="5" step="1" onchange="updateRotation()" />
						<p>Rotation z: </p>
						<input id="rotationZ" type="range" min="0" max="10" value="5" step="1" onchange="updateRotation()" />
					</section>
					<section>
						<select name="modelControl" onchange="updateModel(this.value)">
						  <option value="cube">Cube</option>
						  <option value="stall">Stall</option>
						  <option value="nanosuit">Nanosuit</option>
						</select>
					</section>
				</form>
				<p>
					In development | <a href="http://simonjinaphant.github.io">Simon Jinaphant</a>
				</p>
			</footer>
		</div>
	</body>
	<script src="js/objUtil.js"></script>
	<script src="js/main.js"></script>
</html>